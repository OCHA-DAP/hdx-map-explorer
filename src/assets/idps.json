{
  "name": "IDPs at adm1",
  "url": "http://data.hdx.rwlabs.org/dataset/2d3c4e22-4603-45b8-b231-82cc2d45abf2/resource/c51b69a0-5f2c-4598-aded-dc63095380fe/download/hdxsprint-dtm-adm1.csv",
  "map": {
    "shapefile": {
      "url": "/assets/json/gadm28_LCR_adm1.geojson",
      "joinColumn": "NAME_1"
    },
    "layers": [
      {
        "joinColumn": "#adm1+name",
        "valueColumn": "#affected+displaced+sum",
        "operations": [
          {
            "type": "url-params",
            "options": {
              "value": "rename-newtag05=affected%2Bdisplaced%2Bsum&filter04=cut&rename-oldtag05=meta%2Bsum&filter05=rename&filter03=count&cut-include-tags04=adm1%2Bname%2Cmeta%2Bsum&count-aggregate-tag03=affected%2Bdisplaced&select-query01-01=%23affected%2Btype%3Didp&rename-header05=Total+people+displaced&count-tags03=adm1%2Bname&filter02=select&filter01=select&select-query02-01=%23date%3E%3D2015-01-01"
            }
          }
        ]
      }
    ]
  },
  "charts": [
    {
      "options": {
        "xColumn": "#date+bin",
        "yColumn": "#affected+displaced"
      },
      "type": "bar",
      "operations": [
        {
          "type": "url-params",
          "options": {
            "value": "rename-newtag05=affected%2Bdisplaced%2Bsum&filter04=cut&rename-oldtag05=meta%2Bsum&cut-include-tags04=date%2Bbin%2Cmeta%2Bsum&filter05=rename&sort-tags02=%23date%2Bbin&filter03=count&filter02=sort&count-aggregate-tag03=%23affected%2Bdisplaced&select-query01-01=%23affected%2Btype%3Didp&count-tags03=%23date%2Bbin&filter01=select"
          }
        },
        {
          "type": "sum/min/max/count",
          "options": {
            "groupBy": [
              "adm1",
              "adm2"
            ],
            "value": "deaths"
          }
        }
      ]
    }
  ]
}
